---
phase: 03-project-restructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/
  - pom.xml
  - README.md
  - CLAUDE.md
  - DEVELOPMENT_NOTES.md
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "src/ directory exists directly under project root"
    - "pom.xml exists directly under project root"
    - "generations/ folder no longer exists"
    - "Project documentation (README.md, CLAUDE.md) is at root"
  artifacts:
    - path: "src/main/java/world/bentobox/islandselector/IslandSelector.java"
      provides: "Main addon class"
    - path: "src/main/resources/addon.yml"
      provides: "Addon configuration"
    - path: "pom.xml"
      provides: "Maven build configuration"
    - path: "README.md"
      provides: "Project documentation (IslandSelector, not agent harness)"
    - path: ".gitignore"
      provides: "Combined Java/Maven ignore patterns"
  key_links:
    - from: "pom.xml"
      to: "src/main/java"
      via: "Maven default sourceDirectory"
      pattern: "Standard Maven convention"
    - from: "pom.xml"
      to: "src/main/resources"
      via: "Maven resources path"
      pattern: "src/main/resources"
---

<objective>
Move the Maven project from generations/island_selector/ to the repository root, achieving a standard Maven project structure.

Purpose: Enable IDE auto-detection, standard build workflows, and professional project organization.
Output: Clean Maven project at repository root with all source files, documentation, and proper .gitignore.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-project-restructure/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Move core Maven project files</name>
  <files>
    - src/ (entire directory tree)
    - pom.xml
  </files>
  <action>
Move the core Maven project structure from generations/island_selector/ to project root using git mv to preserve history:

1. Move the src/ directory:
   ```bash
   git mv generations/island_selector/src ./src
   ```

2. Move pom.xml:
   ```bash
   git mv generations/island_selector/pom.xml ./pom.xml
   ```

IMPORTANT: Use `git mv`, NOT filesystem mv/move commands. This preserves file history.
  </action>
  <verify>
Run: `ls -la src/ pom.xml` - both should exist at root
Run: `git status` - should show renamed files staged
  </verify>
  <done>src/ directory and pom.xml exist at project root, staged as renames in git</done>
</task>

<task type="auto">
  <name>Task 2: Move documentation and merge configuration</name>
  <files>
    - README.md (replaced)
    - CLAUDE.md (moved)
    - DEVELOPMENT_NOTES.md (moved)
    - .gitignore (merged)
    - nul (deleted)
    - generations/island_selector/target/ (deleted)
  </files>
  <action>
Handle documentation and configuration files:

1. Delete root README.md (describes agent harness, not this project):
   ```bash
   git rm README.md
   ```

2. Move IslandSelector README.md to root:
   ```bash
   git mv generations/island_selector/README.md ./README.md
   ```

3. Move other documentation:
   ```bash
   git mv generations/island_selector/CLAUDE.md ./CLAUDE.md
   git mv generations/island_selector/DEVELOPMENT_NOTES.md ./DEVELOPMENT_NOTES.md
   ```

4. Replace root .gitignore with the inner one (which has comprehensive Java/Maven patterns):
   - The inner .gitignore (generations/island_selector/.gitignore) has proper Java/Maven patterns
   - The root .gitignore has agent-specific patterns no longer needed
   - Delete root .gitignore, move inner one
   ```bash
   rm .gitignore
   git mv generations/island_selector/.gitignore ./.gitignore
   ```

5. Delete the target/ directory (build artifact, not tracked, regenerated by Maven):
   ```bash
   rm -rf generations/island_selector/target
   ```

6. Delete the "nul" file at root (erroneous artifact):
   ```bash
   rm nul
   ```

NOTE: target/ and nul are untracked, so use rm not git rm.
  </action>
  <verify>
Run: `ls README.md CLAUDE.md DEVELOPMENT_NOTES.md .gitignore` - all should exist at root
Run: `cat .gitignore | head -5` - should show Java/Maven patterns (not agent patterns)
Run: `ls generations/island_selector/target 2>/dev/null || echo "target deleted"` - should report deleted
Run: `ls nul 2>/dev/null || echo "nul deleted"` - should report deleted
  </verify>
  <done>Documentation files at root, .gitignore has Java/Maven patterns, artifacts deleted</done>
</task>

<task type="auto">
  <name>Task 3: Remove empty directories and commit</name>
  <files>
    - generations/ (removed)
  </files>
  <action>
Clean up the now-empty directory tree and commit all changes:

1. Check if generations/island_selector/ is empty:
   ```bash
   ls generations/island_selector/
   ```
   Should be empty or not exist.

2. Remove the empty directory tree:
   ```bash
   rmdir generations/island_selector
   rmdir generations
   ```

3. Verify generations/ no longer exists:
   ```bash
   ls generations 2>/dev/null || echo "generations/ removed successfully"
   ```

4. Commit all the restructure changes:
   ```bash
   git add .gitignore
   git commit -m "refactor: move Maven project to repository root

   - Move src/ and pom.xml from generations/island_selector/ to root
   - Replace agent harness README with IslandSelector README
   - Move CLAUDE.md and DEVELOPMENT_NOTES.md to root
   - Use inner .gitignore (Java/Maven patterns)
   - Delete build artifacts (target/) and erroneous files (nul)
   - Remove empty generations/ directory tree

   Project now follows standard Maven directory layout.

   Requirements: MOV-01, MOV-02, MOV-03"
   ```
  </action>
  <verify>
Run: `ls generations 2>/dev/null || echo "SUCCESS: generations/ removed"`
Run: `git log -1 --oneline` - should show the restructure commit
Run: `git status` - should be clean
  </verify>
  <done>generations/ folder removed, all changes committed, working tree clean</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Structure verification:**
   - `ls pom.xml src/` - both exist at root
   - `ls src/main/java/world/bentobox/islandselector/IslandSelector.java` - main class exists
   - `ls src/main/resources/addon.yml` - resource exists

2. **Cleanup verification:**
   - `ls generations 2>/dev/null || echo "PASS"` - should print PASS
   - `ls nul 2>/dev/null || echo "PASS"` - should print PASS

3. **Git verification:**
   - `git status` - clean working tree
   - `git log --oneline -1` - shows restructure commit

4. **History verification:**
   - `git log --follow --oneline src/main/java/world/bentobox/islandselector/IslandSelector.java | head -3` - shows history preserved
</verification>

<success_criteria>
- src/ directory exists at project root with all Java source files
- pom.xml exists at project root
- README.md at root describes IslandSelector addon (not agent harness)
- .gitignore contains Java/Maven patterns
- generations/ directory no longer exists
- All changes committed with descriptive message
- Git status shows clean working tree
</success_criteria>

<output>
After completion, create `.planning/phases/03-project-restructure/03-01-SUMMARY.md`
</output>
