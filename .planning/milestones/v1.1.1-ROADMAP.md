# Milestone v1.1.1: Bugfixes

**Status:** SHIPPED 2026-01-21
**Phases:** 8-10
**Total Plans:** 3

## Overview

Bugfix patch release addressing three independent issues:
- Level display accuracy (matching `/island level` command)
- Warp sign-based visit controls (preventing unauthorized visits)
- Relocation safety (preventing unintended player teleportation)

## Phases

### Phase 8: Level Display

**Goal**: Island level displayed in GUI matches actual level with no stale data
**Depends on**: Nothing (independent bugfix)
**Requirements**: LEVL-01, LEVL-02
**Plans**: 1 plan

Plans:
- [x] 08-01-PLAN.md — Fix level display to use overworld-only, non-cached method

**Success Criteria** (what must be TRUE):
  1. User sees same level number in GUI as `/island level` command shows
  2. After leveling up, GUI shows new level immediately without reopening

### Phase 9: Island Visiting

**Goal**: Right-click visit only works when island has active warp sign
**Depends on**: Nothing (independent bugfix)
**Requirements**: VIST-01, VIST-02, VIST-03, VIST-04
**Plans**: 1 plan

Plans:
- [x] 09-01-PLAN.md — WarpIntegration + GUI warp indicator + visit restriction

**Success Criteria** (what must be TRUE):
  1. User can only visit islands that have warp signs (right-click teleports)
  2. GUI shows warp indicator on islands that have warps, hides "Right-click to visit" hint when no warp
  3. Clicking island without warp shows clear "no warp" message instead of teleporting

### Phase 10: Relocation Safety

**Goal**: Relocation only affects players actually on the relocating island
**Depends on**: Nothing (independent bugfix)
**Requirements**: RELC-01, RELC-02
**Plans**: 1 plan

Plans:
- [x] 10-01-PLAN.md — Add island.onIsland() checks before relocation teleports

**Success Criteria** (what must be TRUE):
  1. Player standing on island being relocated is teleported to new location
  2. Player elsewhere in world (spawn, other island, nether) is not teleported

## Progress

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 8. Level Display | 1/1 | Complete | 2026-01-20 |
| 9. Island Visiting | 1/1 | Complete | 2026-01-20 |
| 10. Relocation Safety | 1/1 | Complete | 2026-01-21 |

---

## Milestone Summary

**Key Decisions:**
- Use `getFormattedIslandLevel()` (non-cached, overworld-only) for accurate level display
- Use reflection to access Warps addon (same pattern as LevelIntegration)
- Return false from hasWarp when Warps not installed (allows unrestricted visits)
- Hide visit hint entirely when no warp (cleaner UI)
- Check player location at start of relocation, before any async operations
- Team members checked at teleport time (may have moved during async)

**Issues Resolved:**
- Fixed level mismatch between GUI and `/island level` command
- Fixed ability to visit islands without warp signs
- Fixed relocation teleporting unrelated players to spawn

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

*For current project status, see .planning/ROADMAP.md*
*Archived: 2026-01-21 as part of v1.1.1 milestone completion*
